-- =========================================================
-- OT 역량평가 최종 30문항 (CS 10 / 협업(Git) 10 / AI 10)
-- 3지선다(A/B/C), option_d는 빈 문자열로 저장
-- 기존 문항 중 30~40% 교체안 반영 (총 11문항 교체)
-- =========================================================

-- 전체 초기화 (원하면 실행)
DELETE FROM questions;

-- =========================
-- CS (10) : 실전 디버깅/성능/배포/환경 트러블슈팅 포함 (4문항 교체 반영)
-- =========================
INSERT INTO questions (question_text, option_a, option_b, option_c, correct_answer, category) VALUES
('프로덕션에서 500이 발생했습니다. 가장 먼저 해야 할 일은?',
 '서버를 재시작한다',
 '에러 로그/스택트레이스를 확인하고 재현 조건을 파악한다',
 '코드를 처음부터 다시 작성한다',
 'B', 'cs'),

('배포 후 특정 API만 500이 납니다. 가장 효과적인 원인 좁히기 방법은?',
 '최근 변경 diff를 확인하고 해당 API 라우팅/의존성부터 점검한다',
 '모든 기능을 한 번에 롤백한다',
 'DB를 새로 만든다',
 'A', 'cs'),

('API 응답이 느릴 때 가장 먼저 확인해야 할 단서는?',
 '서버 로그에서 처리시간을 DB/외부호출/애플리케이션으로 분해해 본다',
 '사용자 수를 먼저 확인한다',
 '프론트 CSS 용량을 먼저 줄인다',
 'A', 'cs'),

('리스트 화면에서 N+1 쿼리 문제가 의심됩니다. 해결로 가장 적절한 것은?',
 '쿼리를 더 많이 쪼갠다',
 'JOIN/eager loading/IN 쿼리로 한 번에 가져온다',
 '테이블을 더 많이 만든다',
 'B', 'cs'),

-- (교체) FastAPI docs / 배포 경로 문제
('Docker 컨테이너는 실행 중인데 FastAPI /docs 페이지가 열리지 않습니다. 가장 먼저 확인할 것은?',
 'FastAPI 버전',
 '포트 바인딩 및 reverse proxy(Nginx) 경로 설정',
 'Python 문법 오류',
 'B', 'cs'),

('프론트에서 민감한 키가 필요해 보일 때, 가장 안전한 방식은?',
 '프론트 코드에 직접 넣는다',
 '서버(API Route)에서만 키를 사용하고 프론트는 서버를 호출한다',
 '주석으로 숨긴다',
 'B', 'cs'),

('프론트-백 분리 환경에서 쿠키 인증이 잘 안 붙는 흔한 원인은?',
 'DB 인덱스가 없다',
 '이미지 용량이 크다',
 'CORS에서 credentials/origin 설정이 맞지 않다',
 'C', 'cs'),

('배포 직후 장애가 발생했습니다. 가장 안전한 대응은?',
 '원인을 모르는 상태에서 핫픽스를 연속으로 올린다',
 '즉시 롤백 후 재현 가능한 환경에서 원인 분석한다',
 '사용자에게 새로고침 안내만 한다',
 'B', 'cs'),

-- (교체) Windows 패키지 설치 실패
('Windows 환경에서 Python 패키지 설치가 실패합니다. 가장 합리적인 초기 접근은?',
 '코드를 다시 작성한다',
 '에러 메시지에서 OS/Python/컴파일 의존성 여부를 확인한다',
 '무조건 리눅스로 바꾼다',
 'B', 'cs'),

-- (교체) Nginx 환경변수 전달 문제
('Nginx 뒤에서 실행 중인 서버가 환경변수를 읽지 못합니다. 가장 먼저 점검할 항목은?',
 '서버 코드',
 'Nginx에서 앱으로 환경변수를 전달하는 설정 방식',
 'DB 연결 정보',
 'B', 'cs'),

-- (교체) GitHub Actions: 로컬 OK, CI Fail
('GitHub Actions에서 로컬에선 되던 테스트가 CI에서만 실패합니다. 가장 먼저 확인할 것은?',
 '테스트 코드 자체',
 'CI 환경의 OS/런타임 버전(Node·Python 등)/환경변수',
 'GitHub 계정 권한',
 'B', 'cs');

-- =========================
-- 협업 (Git 중심) (10) : 기존 7 + 교체 3 반영
-- =========================
INSERT INTO questions (question_text, option_a, option_b, option_c, correct_answer, category) VALUES
('PR 올리기 전, feature 브랜치에 dev 최신 변경을 반영하려 합니다. 팀이 rebase 허용 문화일 때 가장 좋은 선택은?',
 'feature를 dev 기준으로 rebase한다',
 'dev를 feature에 merge commit으로 합친다',
 'dev를 feature에 force push로 덮는다',
 'A', 'collab'),

('이미 PR 리뷰가 진행 중입니다. 커밋 히스토리를 깔끔하게 만들고 싶습니다. 리뷰 흐름을 최대한 안 깨는 선택은?',
 'PR 브랜치에서 rebase 후 force push한다',
 'PR을 닫고 dev에 직접 merge한다',
 '새 브랜치에서 정리(squash 등) 후 새 PR을 만든다',
 'C', 'collab'),

('main에 잘못된 커밋이 머지되었고 이후 정상 커밋이 더 쌓였습니다. 운영 기준에서 가장 안전한 복구는?',
 'main을 reset --hard로 되돌리고 force push한다',
 'git revert로 되돌리는 커밋을 추가한다',
 '문제 커밋을 cherry-pick으로 다시 덮는다',
 'B', 'collab'),

('두 feature 브랜치가 같은 파일을 크게 수정해 충돌이 예상됩니다. 충돌 최소화를 위한 가장 좋은 전략은?',
 '먼저 하나를 dev에 머지하고, 나머지는 최신 dev 기준으로 재정렬(rebase/merge)한다',
 '둘 다 dev에 동시에 머지해서 충돌을 한 번에 해결한다',
 '충돌은 머지할 때 자동 해결될 거라 기다린다',
 'A', 'collab'),

('팀에서 Squash merge를 사용합니다. 이 전략의 가장 큰 트레이드오프는?',
 '충돌이 더 자주 난다',
 '배포 속도가 느려진다',
 '세부 커밋 히스토리가 사라져 추적성이 떨어진다',
 'C', 'collab'),

('다음 중 cherry-pick을 쓰는 게 가장 적절한 상황은?',
 '특정 버그 수정 커밋 1개만 hotfix 브랜치에 적용할 때',
 '브랜치의 모든 변경을 다른 브랜치로 옮길 때',
 '커밋 히스토리를 정리하고 싶을 때',
 'A', 'collab'),

('팀원이 실수로 dev에 직접 push할 수 있는 상태입니다. 사고 가능성을 구조적으로 줄이는 최선은?',
 'dev 브랜치를 삭제하고 새로 만든다',
 '브랜치 보호 규칙으로 direct push를 차단한다',
 '회의로 규칙을 공유한다',
 'B', 'collab'),

('PR에 기능 변경과 리팩토링/포맷팅이 섞여 있습니다. 리뷰 품질이 떨어지는 가장 큰 이유는?',
 '변경 의도가 의미 단위로 분리되지 않아 파악이 어렵다',
 '파일 수가 많아서 GitHub가 느리다',
 '커밋 메시지가 영어라서',
 'A', 'collab'),

('rebase를 자주 쓰는 팀에서도 협업 관점에서 가장 위험한 행동은?',
 '커밋을 자주 나누는 것',
 'PR 설명을 길게 쓰는 것',
 '공유 브랜치(main/dev)에서 force push를 하는 것',
 'C', 'collab'),

('릴리즈 노트(Changelog)를 자동화하기 가장 좋은 기준은?',
 '파일 변경 수',
 'PR 제목/라벨/커밋 메시지 규칙(Conventional Commits 등)',
 '작업 시간 기록',
 'B', 'collab'),

-- (교체) CI 실패 대응
('GitHub Actions가 실패했지만, 로컬에서는 동일 명령이 성공합니다. 가장 합리적인 1차 대응은?',
 '로컬 결과가 맞다고 판단하고 무시한다',
 'CI 로그를 기준으로 실행 환경 차이를 비교한다',
 '워크플로 파일을 삭제하고 다시 작성한다',
 'B', 'collab'),

-- (교체) 히스토리 꼬임 원인
('팀 저장소에서 Git 히스토리가 꼬여 롤백이 어려운 상태가 반복됩니다. 가장 흔한 원인으로 적절한 것은?',
 '커밋이 너무 많다',
 '공유 브랜치에서 rebase/force push를 반복한다',
 '브랜치 수가 적다',
 'B', 'collab'),

-- (교체) 추적성(why/test) 강화
('PR 머지 후 “어디서 문제가 생겼는지” 추적이 어렵습니다. 이 상황을 가장 잘 예방하는 방법은?',
 '커밋을 크게 묶는다',
 'PR 단위로 변경 목적과 영향 범위, 테스트 방법을 명확히 남긴다',
 '리뷰를 생략한다',
 'B', 'collab');

-- =========================
-- AI (10) : 서비스 제작/운영 관점 + 과정 핵심(벡터DB/평가/에이전트) 포함 (4문항 교체 반영)
-- =========================
INSERT INTO questions (question_text, option_a, option_b, option_c, correct_answer, category) VALUES
('LLM에게 “기능 구현”을 요청할 때 결과 품질을 가장 크게 올리는 정보 조합은?',
 '입력/출력 예시 + 제약조건 + 실패 케이스 + 판단 기준(테스트/루브릭)',
 '역할 부여(“너는 시니어 개발자”) + 친절한 설명 요청',
 '요청을 길게 쓰되 예시는 생략',
 'A', 'ai'),

('LLM이 생성한 코드를 서비스에 넣기 전 가장 먼저 해야 하는 것은?',
 '린트/포맷부터 적용한다',
 '핵심 로직이 의도대로 동작하는지 최소 테스트(입출력/엣지)를 만든다',
 '문서화를 먼저 한다',
 'B', 'ai'),

('LLM 비용이 많이 나오는 상황에서, 품질을 크게 훼손하지 않고 즉시 효과를 보는 방법은?',
 '무조건 더 작은 모델로 낮춘다',
 '프롬프트를 더 길게 만들어 지시를 늘린다',
 '자주 반복되는 요청/컨텍스트를 캐시하고 입력 토큰을 최소화한다',
 'C', 'ai'),

('프롬프트 변경 A/B 중 더 좋은 버전을 가장 신뢰도 있게 고르는 방법은?',
 '개발자가 읽어보고 더 그럴듯한 쪽을 선택한다',
 '작은 테스트셋 + 루브릭으로 정량 비교 후 선택한다',
 '사용자 선호 설문으로만 결정한다',
 'B', 'ai'),

('LLM이 사실과 다른 답을 내는 것을 제품에서 줄이려면 가장 효과적인 조합은?',
 '“출처를 반드시 달아라” 규칙만 추가한다',
 '시스템 규칙 강화 + 근거 데이터 제공(검색/RAG) + 핵심 주장 검증 단계 추가',
 'temperature를 0으로 고정한다',
 'B', 'ai'),

-- (교체) Vector DB 품질 점검
('Vector DB를 도입했지만 검색 결과 품질이 기대보다 낮습니다. 가장 먼저 점검할 요소는?',
 'DB 종류',
 '임베딩 모델/문서 chunk 크기/검색 방식(top-k, distance)',
 'LLM temperature',
 'B', 'ai'),

-- (교체) RAG 근거 부정확 개선
('RAG 시스템에서 답변은 나오지만 근거가 부정확합니다. 가장 합리적인 개선 방향은?',
 '프롬프트를 더 길게 작성한다',
 'retrieval 단계의 문서 분할/검색 품질을 개선한다',
 '모델을 더 큰 것으로 교체한다',
 'B', 'ai'),

-- (교체) Agent 종료/상태 문제
('에이전트가 여러 툴을 호출한 뒤 종료되지 않습니다. 가장 먼저 점검할 것은?',
 'LLM 모델',
 '상태 관리/종료 조건/툴 호출 조건',
 '프론트 UI',
 'B', 'ai'),

-- (교체) 평가 지표 구성
('LLM 결과가 “좋아 보이긴 하지만” 품질을 객관적으로 판단하기 어렵습니다. 서비스 관점에서 가장 필요한 다음 단계는?',
 '사용자 만족도 설문만 진행한다',
 '대표 질문셋 + 정답 기준(루브릭)으로 평가 지표를 구성한다',
 '모델을 업그레이드한다',
 'B', 'ai'),

('에이전트가 외부 API(툴)를 호출하는 기능을 설계할 때 운영 장애를 줄이는 핵심은?',
 '도구를 많이 붙여 자동화 범위를 최대화한다',
 '툴 입력 스키마를 명확히 하고 호출 조건/횟수 제한/타임아웃/로깅을 둔다',
 '모델이 판단하게 두고 제한을 최소화한다',
 'B', 'ai');
